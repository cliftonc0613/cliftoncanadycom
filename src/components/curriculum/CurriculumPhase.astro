---
// CurriculumPhase.astro
// Expandable phase section (Foundation, Portfolio Projects, Career Launch)
// Wraps weeks in details/summary

import CurriculumWeek from "./CurriculumWeek.astro";

interface Session {
  session: number;
  title: string;
  description: string;
  badge: "hands-on" | "project-based" | "career-coaching";
}

interface Week {
  week: number;
  title: string;
  sessions: Session[];
}

interface Props {
  phase: string;
  weeks: Week[];
  isOpen?: boolean; // Controls default open state for desktop
}

const { phase, weeks, isOpen = false } = Astro.props;

// Format phase name for display
const phaseDisplay = phase.toUpperCase();
const phaseRanges: Record<string, string> = {
  "Foundation": "WEEKS 1-4",
  "Portfolio Projects": "WEEKS 5-7",
  "Career Launch": "WEEK 8"
};
const weekRange = phaseRanges[phase] || phaseDisplay;
---

<details class={`group border-2 border-gray-200 rounded-lg p-6 open:bg-blue-50 cursor-pointer transition-all ${isOpen ? "open" : ""}`} open={isOpen}>
  <summary class="flex items-center justify-between cursor-pointer font-bold text-lg text-primary hover:text-primary/80 transition-colors select-none">
    <span>{weekRange}: {phase}</span>
    <span class="text-2xl transition duration-300 group-open:rotate-180">â€º</span>
  </summary>

  <div class="mt-6 space-y-4 ml-4">
    {weeks.map((week) => (
      <CurriculumWeek
        week={week.week}
        title={week.title}
        sessions={week.sessions}
      />
    ))}
  </div>
</details>

<style>
  details {
    transition: background-color 0.2s ease, border-color 0.2s ease;
  }

  summary {
    transition: color 0.2s ease;
  }

  summary::-webkit-details-marker {
    display: none;
  }

  details[open] {
    border-color: var(--primary, #1E40AF);
  }

  details[open] summary {
    color: var(--primary, #1E40AF);
  }
</style>
